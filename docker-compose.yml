# [1] สร้าง Service 'db' ด้วย Docker
version: '3.8'

services:
  db:
    # ใช้ Image mysql:latest
    image: mysql:latest
    container_name: eval_db
    restart: unless-stopped
    
    # [1] ตั้งค่า Environment Variable
    environment:
      MYSQL_ROOT_PASSWORD: your_strong_password_here
      MYSQL_DATABASE: personnel_eval_db
    
    # [1] Map Port 3306
    ports:
      - "3306:3306"
      
    # Map Volume เพื่อให้ init.sql ทำงานตอนสร้าง Container [2]
    volumes:
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql
      - mysql_data:/var/lib/mysql

volumes:
  mysql_data: